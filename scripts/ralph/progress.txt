## Codebase Patterns
- Workspace root Cargo.toml has `members` array for all crates
- Each crate uses `edition.workspace = true`, `rust-version.workspace = true`, `license.workspace = true`, `repository.workspace = true`
- Facade crate (`pdfplumber`) re-exports from `pdfplumber-core` and `pdfplumber-parse`
- Page API: `Pdf::open_file(path, None)`, `pdf.page(idx)`, `pdf.pages_iter()`, `pdf.page_count()`
- Page methods: `page.chars()`, `page.extract_words(opts)`, `page.extract_text(opts)`, `page.find_tables(settings)`
- Char fields: text, fontname, size, x0, top, x1, bottom, doctop, upright, direction
- Word fields: text, x0, top, x1, bottom, doctop, direction
- Table has `rows: Vec<Vec<Cell>>`, Cell has `text: Option<String>`
- Integration tests in `crates/pdfplumber/tests/` use real PDFs from `tests/fixtures/`
- CLI crate uses `assert_cmd` and `predicates` for integration tests
- CLI integration tests use `lopdf` + `tempfile` to create PDF fixtures on disk
- Page range parsing: `parse_page_range("1,3-5", page_count)` → 0-indexed `Vec<usize>`
- Text command pattern: `text_cmd::run(file, pages, format, layout) -> Result<(), i32>`

# Ralph Progress Log
Started: 2026년  2월 28일 토요일 14시 03분 29초 KST
---

## 2026-02-28 - US-050
- Implemented CLI crate scaffolding with clap-based argument parsing
- Created `crates/pdfplumber-cli` with `[[bin]] name = "pdfplumber"`
- Added to workspace members in root Cargo.toml
- Defined CLI struct with 4 subcommands: Text, Chars, Words, Tables
- All subcommands accept positional FILE arg, --pages, --format options
- Text subcommand has extra --layout flag; TextFormat (text/json) vs OutputFormat (text/json/csv)
- 10 unit tests (clap parsing) + 7 integration tests (assert_cmd --help and error cases)
- Files changed: Cargo.toml, crates/pdfplumber-cli/{Cargo.toml, src/main.rs, src/cli.rs, tests/cli_args.rs}
- Dependencies added: clap (with derive), assert_cmd (dev), predicates (dev)
- **Learnings for future iterations:**
  - `assert_cmd::Command::cargo_bin` is deprecated in favor of `cargo::cargo_bin_cmd!` macro but still works
  - clap derive requires `#[command(subcommand)]` on the enum field and `#[derive(Subcommand)]` on the enum
  - Subcommand stubs use `eprintln!` + `std::process::exit(1)` for not-yet-implemented commands
---

## 2026-02-28 - US-051
- Implemented `text` subcommand for extracting text from PDF pages
- Files changed: crates/pdfplumber-cli/{Cargo.toml, src/main.rs, src/text_cmd.rs, src/page_range.rs, tests/text_cmd.rs}
- New modules: `text_cmd` (text extraction logic), `page_range` (page range parsing)
- Dependencies added: lopdf (dev), tempfile (dev) — for creating test fixture PDFs
- Features: text/json output formats, --pages filtering, --layout flag, error handling
- 8 unit tests (page_range) + 12 integration tests (text_cmd)
- **Learnings for future iterations:**
  - `page_range::parse_page_range` is reusable for all subcommands
  - Test PDF fixtures: use `lopdf` to create PDFs programmatically, `tempfile::NamedTempFile` to write to disk
  - Error pattern: return `Result<(), i32>` from subcommand handlers where i32 is the exit code
  - JSON output uses `serde_json::json!` macro with JSON Lines format (one JSON object per line)
---
