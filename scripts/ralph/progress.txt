## Codebase Patterns
- Workspace uses `edition.workspace = true` and `rust-version.workspace = true` to inherit from root
- Crate directory structure: `crates/<name>/Cargo.toml` + `crates/<name>/src/lib.rs`
- Dependency chain: pdfplumber → {pdfplumber-core, pdfplumber-parse}, pdfplumber-parse → pdfplumber-core
- pdfplumber-core has zero external dependencies (pure algorithms)
- Quality checks: `cargo fmt --all -- --check && cargo clippy --workspace -- -D warnings && cargo test --workspace && cargo check --workspace`
---

# Ralph Progress Log - Phase 2: Words & Geometry - Word Grouping, Path Extraction, Reading Order
Started: 2026년  2월 27일 금요일 23시 36분 31초 KST
---

## 2026-02-27 - US-018: WordExtractor - tolerance-based character grouping
- **What was implemented:**
  - `BBox` type in `crates/pdfplumber-core/src/geometry.rs` — bounding box with top-left origin (x0, top, x1, bottom), with union/width/height methods
  - `Char` type in `crates/pdfplumber-core/src/text.rs` — character with text, bbox, fontname, size
  - `WordOptions` struct with pdfplumber-compatible defaults (x_tolerance=3, y_tolerance=3, keep_blank_chars=false, use_text_flow=false)
  - `Word` struct with text, bbox (union of char bboxes), and constituent chars
  - `WordExtractor::extract()` — groups chars into words by spatial proximity with sorting, space handling, and tolerance-based grouping
- **Files changed:**
  - `crates/pdfplumber-core/src/lib.rs` — module declarations and re-exports
  - `crates/pdfplumber-core/src/geometry.rs` (new) — BBox type
  - `crates/pdfplumber-core/src/text.rs` (new) — Char type
  - `crates/pdfplumber-core/src/words.rs` (new) — Word, WordOptions, WordExtractor + 21 unit tests
- **Dependencies added:** None (pure Rust, zero dependencies)
- **Learnings for future iterations:**
  - Keep modules flat (geometry.rs, text.rs, words.rs) rather than nested — simpler and matches crate convention
  - `BBox::union()` is the key primitive for composing bounding boxes — will be reused across many features
  - Word extraction gap check: `x_gap = next.x0 - prev.x1`, new word if `> x_tolerance` or `y_diff > y_tolerance`
  - Sorting by (top, x0) before grouping handles out-of-order chars from PDF content streams
---

## 2026-02-27 - US-019: Page::extract_words() API + Word type integration
- **What was implemented:**
  - `Page` struct in `crates/pdfplumber/src/page.rs` — holds page metadata (page_number, width, height) and extracted chars
  - `Page::new()` constructor, accessor methods: `page_number()`, `width()`, `height()`, `chars()`
  - `Page::extract_words(&self, options: &WordOptions) -> Vec<Word>` — delegates to `WordExtractor::extract()`
  - Public re-exports from `crates/pdfplumber/src/lib.rs`: `Page`, `BBox`, `Char`, `Word`, `WordExtractor`, `WordOptions`
  - 9 unit tests covering: page creation, chars access, word extraction with default/custom options, text concatenation, bbox calculation, multiline, empty page, constituent chars
- **Files changed:**
  - `crates/pdfplumber/src/page.rs` (new) — Page type + 9 tests
  - `crates/pdfplumber/src/lib.rs` — added page module, public re-exports
- **Dependencies added:** None
- **Learnings for future iterations:**
  - The pdfplumber facade crate re-exports core types so users only need `use pdfplumber::{Page, WordOptions}`
  - Page is constructed from pre-extracted chars; actual PDF parsing will feed chars into Page later
  - Test modules within the facade crate need explicit `use pdfplumber_core::BBox` since `super::*` only imports from the module scope, not the crate re-exports
---
