# Real-World PDF Test Fixtures

Test fixtures covering diverse PDF features for integration testing.
Generated programmatically using `lopdf` (Rust) to create controlled, reproducible test cases.

## Categories

### fonts-encoding/

| File | Purpose |
|------|---------|
| `standard-14-fonts.pdf` | Uses three standard Type1 fonts (Helvetica, Courier, Times-Roman) on a single page. Tests multi-font extraction and fontname reporting. |
| `special-characters.pdf` | Text with escaped parentheses `\(`, backslashes `\\`, octal escapes (`\251` = ©), and ampersands. Tests PDF string escape handling. |

### layout/

| File | Purpose |
|------|---------|
| `multi-font-sizes.pdf` | Title at 24pt, body at 12pt, footnote at 8pt. Tests font size detection and mixed-size word grouping. |
| `positioned-text.pdf` | Text at four corners (TopLeft, TopRight, BottomLeft, BottomRight) and center. Tests coordinate extraction accuracy with known absolute positions. |

### tables/

| File | Purpose |
|------|---------|
| `simple-bordered-table.pdf` | 3×3 grid table with 1pt stroke lines. Header: Name/Value/Unit; data: Width/100/mm, Height/200/mm. Tests lattice table detection, row/column counting, cell text extraction. |
| `multi-row-table.pdf` | 2-column, 5-row table (header + 4 data). Items with prices (Apple/$1.50, etc.). Tests multi-row table detection. |

### images/

| File | Purpose |
|------|---------|
| `xobject-image.pdf` | 4×4 RGB image XObject (DeviceRGB, 8bpc) placed via CTM `200 0 0 150 100 400 cm`. Tests image metadata, position, dimensions, and opt-in data extraction. |
| `inline-image.pdf` | 2×2 RGB inline image (BI/ID/EI operators) with abbreviated keys. Tests inline image detection and extraction. |

### edge-cases/

| File | Purpose |
|------|---------|
| `empty-page.pdf` | Page with no content stream. Tests graceful handling of empty pages (0 chars, 0 words, 0 tables). |
| `single-char.pdf` | Single character "X" at (300, 400). Tests minimal extraction (1 char, 1 word). |
| `whitespace-only.pdf` | Content stream with only a space character. Tests that whitespace-only pages produce empty text. |
| `overlapping-text.pdf` | "BOLD" rendered twice at nearly the same position (0.3pt offset). Tests duplicate detection and dedupe functionality. |

## Generator

All fixtures are generated by `crates/pdfplumber/tests/real_world_integration.rs` using `lopdf` on first test run. The `ensure_fixtures()` function creates any missing PDFs.

## Size Constraints

All fixtures are kept under 100KB to avoid repository bloat. This is enforced by the `all_fixtures_under_100kb` test.

## Test Coverage

The integration tests verify:
- **Character extraction accuracy**: fontname, size, text content, valid bboxes
- **Word grouping correctness**: proper word boundaries and content
- **Table detection**: lattice strategy, row/column counts, cell content
- **Image metadata extraction**: position, dimensions, source metadata, data opt-in
- **Edge case handling**: empty pages, single chars, overlapping text, whitespace
- **Platform-specific float tolerance**: coordinates compared with 2.0pt tolerance
